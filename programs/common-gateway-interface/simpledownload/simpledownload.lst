     1                                  ;***********************************************************************************************
     2                                  ; Name:     simpledownload.asm
     3                                  ; Build:    see makefile
     4                                  ; Description:
     5                                  ;   Demonstration of a simple downloadable file, the contents of the file are within the
     6                                  ;   program (simple hello world!! message)
     7                                  ;***********************************************************************************************
     8                                  
     9                                  BITS 64
    10                                  
    11                                  section .bss
    12                                  
    13                                  section .data
    14                                  
    15                                      filedownload:
    16 00000000 436F6E74656E742D74-               db    'Content-type: application/octet-stream',10
    17 00000009 7970653A206170706C-
    18 00000012 69636174696F6E2F6F-
    19 0000001B 637465742D73747265-
    20 00000024 616D0A             
    21 00000027 436F6E74656E742D44-               db    'Content-Disposition: attachment',59,'filename="hello.txt"',10,10
    22 00000030 6973706F736974696F-
    23 00000039 6E3A20617474616368-
    24 00000042 6D656E743B66696C65-
    25 0000004B 6E616D653D2268656C-
    26 00000054 6C6F2E747874220A0A 
    27                                            ; contents of the file to download
    28 0000005D 48656C6C6F20776F72-               db    'Hello world!!',10
    29 00000066 6C6421210A         
    30                                          .length: equ $-filedownload
    31                                  
    32                                  section .text
    33                                      global _start
    34                                      
    35                                  _start:
    36                                  
    37 00000000 B801000000                  mov rax, 1                          ; SYS_WRITE
    38 00000005 48BE-                       mov rsi, filedownload
    39 00000007 [0000000000000000] 
    40 0000000F BA6B000000                  mov rdx, filedownload.length
    41 00000014 BF01000000                  mov rdi, 1                          ; STDOUT
    42 00000019 0F05                        syscall
    43                                      
    44 0000001B BF00000000                  mov rdi, 0                          ; no errors
    45 00000020 B83C000000                  mov rax, 60                         ; SYS_EXIT
    46 00000025 0F05                        syscall
